<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- 
    Mapping file autogenerated by MyEclipse - Hibernate Tools
-->
      
<hibernate-mapping package="com.mangocity.hotel.base.persistence" default-lazy="false">
	<class name="HtlRoom" table="htl_room" 
		dynamic-insert="true" dynamic-update="true">
		
        <id name="ID" column ="ROOM_ID" >
			<generator class="sequence">
				<param name="sequence">seq_hotel_room</param>
			</generator>
        </id>    
        
        <property name="roomTypeId" column ="ROOM_TYPE_ID"></property>  
        <property name="hotelId" column ="HOTEL_ID" ></property>
        <property name="contractId" column="CONTRACT_ID"></property>
        <property name="ableSaleDate"  column  ="ABLE_SALE_DATE" ></property>
        <property name="week" column="week"></property>
        <property name="roomState"  column  ="ROOM_STATE" ></property>
        <property name="status" column ="STATUS" ></property>
        <property name="lastAssureTime" column="LAST_ASSURE_TIME"></property>
        <property name="remark" column="remark"></property>
        <property name="outsideQty" column="OUTSIDE_QTY"></property>
		<property name="cancelOutsideQty" column="CANCEL_OUTSIDE_QTY"></property>
		<property name="hasFree" column="has_free"></property>
		
		<property name="useTempQty" column="USE_TEMP_QTY"></property>
		<property name="ccOutsideQty" column="CC_OUTSIDE_QTY"></property>
		<property name="tpOutsideQty" column="TP_OUTSIDE_QTY"></property>
		<property name="bbOutsideQty" column="BB_OUTSIDE_QTY"></property>
		<property name="tmcOutsideQty" column="TMC_OUTSIDE_QTY"></property>
		<property name="ccTempQty" column="CC_TEMP_QTY"></property>
		<property name="tpTempQty" column="TP_TEMP_QTY"></property>
		<property name="bbTempQty" column="BB_TEMP_QTY"></property>
		<property name="tmcTempQty" column="TMC_TEMP_QTY"></property>
		
		<property name="notCancelQty" column="NOT_CANCEL_QTY"></property>
		
        <bag name="lstQuotas"   cascade="all-delete-orphan" lazy="false">
			<key>
				<column name="room_id"></column>
			</key>        
			<one-to-many class="HtlQuota"/>
        </bag>
        <bag name="lstPrices" cascade="all-delete-orphan" lazy="false">
        	<key>
        		<column name="room_id"></column>
        	</key>
        	<one-to-many class = "HtlPrice"/>
        </bag>
    </class>
    
    <query name="findHtlRoomByBizKey">
		<![CDATA[ 
		from HtlRoom room where room.roomTypeId =? and room.hotelId =? and room.ableSaleDate =?
		]]>
	</query>
	<query name="lstRooms">
		<![CDATA[ 
			from HtlRoom room where room.hotelId =? and room.roomTypeId =? and room.ableSaleDate between ? and ? order by  room.ableSaleDate
		]]>
	</query>
	
	<query name="lstRoomsByRoomTypeId">
		<![CDATA[ 
			from HtlRoom room where room.hotelId =? and room.roomTypeId =? and room.ableSaleDate >= ? and room.ableSaleDate < ? order by  room.ableSaleDate
		]]>
	</query>
	<query name="findRoomByContractId">
		<![CDATA[
			from HtlRoom room where room.contractId=? and room.ableSaleDate between ? and ? 
		]]>
	</query>
	
	<query name="findHtlRoomByRoomTypeId">
		<![CDATA[
			from HtlRoom room where room.ableSaleDate >= ? and room.ableSaleDate < ? and room.roomTypeId = ?
		]]>
	</query>
</hibernate-mapping>
