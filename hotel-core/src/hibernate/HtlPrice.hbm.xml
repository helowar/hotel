<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN"
"http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<!-- 
    Mapping file autogenerated by MyEclipse - Hibernate Tools
-->

<hibernate-mapping package="com.mangocity.hotel.base.persistence" default-lazy="false">
	<class name="HtlPrice" table="HTL_PRICE" 
		dynamic-insert="true" dynamic-update="true">

        <id name="ID" column ="PRICE_ID" unsaved-value="0"> 
			<generator class="sequence">
				<param name="sequence">seq_hotel_price</param>
			</generator>
        </id>
        
       
        <property name="roomTypeId" column = "room_type_id"></property>
        <property name="ableSaleDate"  column  ="ABLE_SALE_DATE" ></property>
        <property name="week" column="week"></property>
        <property name="childRoomTypeId" column ="child_room_type_id"></property>
        <property name="hotelId" column = "hotel_id"></property>
        <property name="quotaBatchId"  column ="quota_Batch_Id" />
        <property name="quotaType" column="quota_type"></property>
        <property name="bigCustomId" column="BIG_CUSTOM_ID" />
        <property name="memberType"  column="MEMBER_TYPE" />
        <property name="basePrice" column="BASE_PRICE"/>
        <property name="advicePrice" column="ADVICE_PRICE" />
        <property name="salesroomPrice"  column="SALESROOM_PRICE" />
        <property name="serviceCharge" column = "service_Charge"/>
        <property name="currency" column = "currency"/>
        <property name="canAddScope" column = "can_Add_Scope"/>
        <property name="addScope" column = "add_scope"></property>
        <property name="incBreakfastNumber" column = "inc_Breakfast_Number"/>
        <property name="incBreakfastType" column = "inc_Breakfast_Type"/>
        <property name="incBreakfastPrice" column = "inc_Breakfast_Price"/>
        <property name="returnComm" column = "return_Comm"/>        
        <property name="commission" column = "commission"/>
        <property name="commissionRate" column = "commission_rate"/>
        <property name="salePrice" column = "sale_Price"/>
        <property name="payMethod" column = "pay_method"></property>
        <property name="closeFlag" column = "CLOSE_FLAG"/>
        <property name="formulaId" column = "formulaId"/>
        <property name="reason" column = "REASON"/>
        <property name="planID" column="planID"></property>
        
        <property name="create_by" column="create_by" update="false"></property>
		<property name="create_by_id" column="create_by_id" update="false"></property>
		<property name="modify_by" column="modify_by"></property>
		<property name="modify_by_id" column="modify_by_id"></property>
		<property name="create_time" column="create_time" update="false"></property>
		<property name="modify_time" column="modify_time"></property>
        <property name="allCloseReason" column="ALL_CLOSE_REASON"></property>
        
        <!-- Begin Add by Shengwei.Zuo 2009-02-05 酒店v2.6新增字段-->
       
        <property name="payToPrepay">
            <column name="PAY_TO_PREPAY" />
        </property>
        <property name="latestBookableDate">
            <column name="LATEST_BOOKABLE_DATE" />
        </property>
        <property name="latestBokableTime">
            <column name="LATEST_BOKABLE_TIME" />
        </property>
        <property name="needAssure" >
            <column name="NEED_ASSURE" />
        </property>
        <property name="mustLastDate" >
            <column name="MUST_LAST_DATE"  />
        </property>
        <property name="mustFirstDate">
            <column name="MUST_FIRST_DATE"/>
        </property>
        
        <!--hotel 2.9.3  新增时间段的预订规则 add by shengwei.zuo 2009-09-06 begin  -->
         <!-- 最早可预订日期  -->
        <property name="firstBookableDate">
            <column name="FIRST_BOOKABLE_DATE" />
        </property>
        
        <!-- 最早可预订时间 -->
        <property name="firstBookableTime">
            <column name="FIRST_BOOKABLE_TIME" />
        </property>
        
        <!-- hotel 2.9.3  新增时间段的预订规则 add by shengwei.zuo 2009-09-06 end -->
        
        <!-- End Add by Shengwei.Zuo 2009-02-05 -->
        
        <!-- 和HtlRoom关联 -->
		<many-to-one name="room"
			class="HtlRoom"
			column="room_id" 			
			unique="true"/>       
    </class>
    
    <query name="getRoomPrices">
		<![CDATA[ 
		   from  HtlPrice c where c.room.id= ?
		]]>
	</query>
	<query name="findPriceBizKey">
		<![CDATA[ 
			from HtlPrice p where p.hotelId=? and p.roomTypeId=? and p.childRoomTypeId=? and p.quotaType=? and p.payMethod=? and p.ableSaleDate=?
		]]>
	</query>
	<query name="findPriceBizKeyEx">
		<![CDATA[ 
			from HtlPrice p where p.hotelId=? and p.roomTypeId=? and p.childRoomTypeId=? and p.quotaType=? and p.payMethod=? and p.ableSaleDate>=? and p.ableSaleDate<? order by p.ableSaleDate 
		]]>
	</query>	
	<query name="checkContinuePrice">
		<![CDATA[ 
			from HtlPrice p where p.hotelId=? and p.roomTypeId=? and p.childRoomTypeId=? and p.ableSaleDate>=? and p.ableSaleDate<=? 
		]]>
	</query>
</hibernate-mapping>

